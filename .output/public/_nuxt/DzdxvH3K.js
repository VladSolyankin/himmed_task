import{J as N,r as v,k as b,d as g,x as c,y as i,z as t,K as f,L as F,A as y,M as A,N as O,O as k,P as U,Q as j,R as $,S as q,T as z,U as h,V as _,o as E,B as D,C as R}from"./Dam5LR_Z.js";const I="daily-planner:tasks";function J(){return`${Date.now().toString(36)}-${Math.random().toString(36).slice(2,8)}`}const S=N("tasks",()=>{const s=v([]);function l(){try{localStorage.setItem(I,JSON.stringify(s.value))}catch(n){console.error("ÐžÑˆÐ¸Ð±ÐºÐ° ÑÐ¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¸Ñ Ð² localStorage",n)}}function o(){try{const n=localStorage.getItem(I);if(!n)return;const e=JSON.parse(n);Array.isArray(e)&&(s.value=e)}catch{s.value=[]}}function a(n){if(!n.title?.trim()||!n.date?.trim())throw new Error("ÐžÐ±ÑÐ·Ð°Ñ‚ÐµÐ»ÑŒÐ½Ñ‹Ðµ Ð¿Ð¾Ð»Ñ: Ð½Ð°Ð·Ð²Ð°Ð½Ð¸Ðµ Ð¸ Ð´Ð°Ñ‚Ð°");const e={id:J(),title:n.title.trim(),date:n.date,description:n.description?.trim()||void 0,createdAt:new Date().toISOString()};s.value.unshift(e),l()}function u(n){const e=s.value.findIndex(r=>r.id===n);e!==-1&&(s.value.splice(e,1),l())}const m=b(()=>s.value),d=b(()=>n=>n?s.value.filter(e=>e.date===n):s.value);return{tasks:s,allTasks:m,tasksByDate:d,loadFromStorage:o,addTask:a,removeTask:u}}),L={class:"group relative rounded-lg border border-gray-200 bg-white p-4 shadow-sm transition hover:shadow"},K={class:"text-base font-semibold"},G={class:"text-xs text-gray-500"},P={key:0,class:"mt-3 border-t pt-3 text-sm text-gray-700 whitespace-pre-line"},V=g({__name:"TaskItem",props:{task:{},expanded:{type:Boolean}},emits:["open","delete"],setup(s){return(l,o)=>(i(),c("article",L,[t("button",{class:"absolute right-2 top-2 hidden rounded p-1 text-gray-500 hover:bg-red-50 hover:text-red-600 group-hover:block",title:"Ð£Ð´Ð°Ð»Ð¸Ñ‚ÑŒ","aria-label":"Ð£Ð´Ð°Ð»Ð¸Ñ‚ÑŒ",onClick:o[0]||(o[0]=F(a=>l.$emit("delete",s.task.id),["stop"]))}," ðŸ—‘ "),t("div",{class:"cursor-pointer",onClick:o[1]||(o[1]=a=>l.$emit("open",s.task.id))},[t("h3",K,y(s.task.title),1),t("p",G,y(s.task.date),1)]),s.expanded?(i(),c("div",P,y(s.task.description||"Ð‘ÐµÐ· Ð¾Ð¿Ð¸ÑÐ°Ð½Ð¸Ñ"),1)):f("",!0)]))}});function Q(){const s=v(null),l=v([]),o=b(()=>l.value.length>0);function a(d,n){l.value.push({mode:"list",date:n}),s.value=d}function u(){l.value.pop(),s.value=null}function m(){s.value=null,l.value=[]}return{selectedTaskId:s,historyStack:l,showBack:o,openDetail:a,goBack:u,reset:m}}const Y={class:"space-y-3"},H={key:0,class:"mb-1"},W={key:1},X={key:0,class:"text-sm text-gray-500"},Z={class:"grid grid-cols-1 gap-3"},ee={key:2},te=g({__name:"TaskList",props:{date:{}},emits:["request-create"],setup(s,{emit:l}){const o=s,a=S(),{tasks:u}=A(a),m=b(()=>a.tasksByDate(o.date)),{selectedTaskId:d,showBack:n,openDetail:e,goBack:r,reset:w}=Q(),T=b(()=>u.value.find(p=>p.id===d.value)||null);function C(p){a.removeTask(p),d.value===p&&r()}O(()=>o.date,()=>{o.date||w()});function M(p){e(p,o.date)}return(p,B)=>(i(),c("section",Y,[k(n)?(i(),c("div",H,[t("button",{class:"text-sm text-blue-600 hover:underline",onClick:B[0]||(B[0]=(...x)=>k(r)&&k(r)(...x))}," â† ÐÐ°Ð·Ð°Ð´ ")])):f("",!0),k(d)?(i(),c("div",ee,[T.value?(i(),$(V,{key:0,task:T.value,expanded:!0,onDelete:C},null,8,["task"])):f("",!0)])):(i(),c("div",W,[m.value.length===0?(i(),c("p",X,' Ð—Ð°Ð´Ð°Ñ‡ Ð½ÐµÑ‚. Ð”Ð¾Ð±Ð°Ð²ÑŒÑ‚Ðµ Ð¿ÐµÑ€Ð²ÑƒÑŽ Ñ Ð¿Ð¾Ð¼Ð¾Ñ‰ÑŒÑŽ ÐºÐ½Ð¾Ð¿ÐºÐ¸ "+". ')):f("",!0),t("div",Z,[(i(!0),c(U,null,j(m.value,x=>(i(),$(V,{key:x.id,task:x,onOpen:M,onDelete:C},null,8,["task"]))),128))])]))]))}}),se={class:"fixed inset-0 z-50 flex items-center justify-center"},oe={class:"relative z-10 w-full max-w-lg rounded-lg bg-white p-4 shadow-lg"},ne=g({__name:"Modal",emits:["close"],setup(s){return(l,o)=>(i(),c("div",se,[t("div",{class:"absolute inset-0 bg-black/40",onClick:o[0]||(o[0]=a=>l.$emit("close"))}),t("div",oe,[t("button",{class:"absolute right-2 top-2 rounded p-1 text-gray-500 hover:bg-gray-100","aria-label":"Ð—Ð°ÐºÑ€Ñ‹Ñ‚ÑŒ",onClick:o[1]||(o[1]=a=>l.$emit("close"))}," âœ• "),q(l.$slots,"default")])]))}}),ae={class:"space-y-2"},le={class:"space-y-2"},re={class:"space-y-2"},ie={class:"flex justify-end gap-3"},de={key:0,class:"text-sm text-red-600"},ue=g({__name:"TaskForm",emits:["success","cancel"],setup(s,{emit:l}){const o=l,a=z({title:"",date:"",description:""}),u=v(""),m=S();function d(){try{m.addTask(a),o("success")}catch(n){u.value=n?.message||"ÐžÑˆÐ¸Ð±ÐºÐ° ÑÐ¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¸Ñ"}}return(n,e)=>(i(),c("form",{class:"space-y-4",onSubmit:F(d,["prevent"])},[e[8]||(e[8]=t("h2",{class:"text-lg font-semibold"},"ÐÐ¾Ð²Ð°Ñ Ð·Ð°Ð´Ð°Ñ‡Ð°",-1)),t("div",ae,[e[4]||(e[4]=t("label",{class:"block text-sm font-medium"},"ÐÐ°Ð·Ð²Ð°Ð½Ð¸Ðµ *",-1)),h(t("input",{"onUpdate:modelValue":e[0]||(e[0]=r=>a.title=r),type:"text",class:"w-full rounded-md border border-gray-300 px-3 py-2 text-sm focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500",placeholder:"ÐÐ°Ð¿Ñ€Ð¸Ð¼ÐµÑ€: ÐšÑƒÐ¿Ð¸Ñ‚ÑŒ Ð¿Ñ€Ð¾Ð´ÑƒÐºÑ‚Ñ‹",required:""},null,512),[[_,a.title,void 0,{trim:!0}]])]),t("div",le,[e[5]||(e[5]=t("label",{class:"block text-sm font-medium"},"Ð”Ð°Ñ‚Ð° *",-1)),h(t("input",{"onUpdate:modelValue":e[1]||(e[1]=r=>a.date=r),type:"date",class:"w-full rounded-md border border-gray-300 px-3 py-2 text-sm focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500",required:""},null,512),[[_,a.date]])]),t("div",re,[e[6]||(e[6]=t("label",{class:"block text-sm font-medium"},"ÐžÐ¿Ð¸ÑÐ°Ð½Ð¸Ðµ",-1)),h(t("textarea",{"onUpdate:modelValue":e[2]||(e[2]=r=>a.description=r),rows:"4",class:"w-full resize-y rounded-md border border-gray-300 px-3 py-2 text-sm focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500",placeholder:"ÐŸÐ¾Ð´Ñ€Ð¾Ð±Ð½ÐµÐµ Ð¾ Ð·Ð°Ð´Ð°Ñ‡Ðµ"},null,512),[[_,a.description,void 0,{trim:!0}]])]),t("div",ie,[t("button",{type:"button",class:"rounded-md border px-4 py-2 text-sm hover:bg-gray-50",onClick:e[3]||(e[3]=r=>n.$emit("cancel"))}," ÐžÑ‚Ð¼ÐµÐ½Ð° "),e[7]||(e[7]=t("button",{type:"submit",class:"rounded-md bg-blue-600 px-4 py-2 text-sm text-white hover:bg-blue-700"}," Ð¡Ð¾Ñ…Ñ€Ð°Ð½Ð¸Ñ‚ÑŒ ",-1))]),u.value?(i(),c("p",de,y(u.value),1)):f("",!0)],32))}}),ce={class:"min-h-full bg-gray-50 text-gray-900"},me={class:"mx-auto max-w-3xl px-4 py-6"},pe={class:"flex items-center justify-between gap-4"},fe={class:"flex items-center gap-3"},ve=["max"],be={class:"mt-6"},xe=g({__name:"index",setup(s){const l=S();E(()=>{l.loadFromStorage()});const o=v(!1);function a(){o.value=!0}function u(){o.value=!1}function m(){o.value=!1}const d=v(""),n=b(()=>new Date().toISOString().slice(0,10));return O(d,e=>{}),(e,r)=>(i(),c("div",ce,[t("div",me,[t("header",pe,[r[2]||(r[2]=t("h1",{class:"text-2xl font-semibold"},"Ð•Ð¶ÐµÐ´Ð½ÐµÐ²Ð½Ð¸Ðº",-1)),t("div",fe,[h(t("input",{"onUpdate:modelValue":r[0]||(r[0]=w=>d.value=w),type:"date",class:"rounded-md border border-gray-300 bg-white px-3 py-2 text-sm shadow-sm focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500",max:n.value,placeholder:"Ð’Ñ‹Ð±ÐµÑ€Ð¸Ñ‚Ðµ Ð´Ð°Ñ‚Ñƒ"},null,8,ve),[[_,d.value]]),t("button",{onClick:a,class:"inline-flex items-center justify-center rounded-full bg-blue-600 p-2 text-white shadow hover:bg-blue-700 focus:outline-none","aria-label":"Ð”Ð¾Ð±Ð°Ð²Ð¸Ñ‚ÑŒ Ð·Ð°Ð´Ð°Ñ‡Ñƒ",title:"Ð”Ð¾Ð±Ð°Ð²Ð¸Ñ‚ÑŒ Ð·Ð°Ð´Ð°Ñ‡Ñƒ"},[...r[1]||(r[1]=[t("span",{class:"text-xl leading-none"},"+",-1)])])])]),t("main",be,[D(te,{date:d.value||void 0,onRequestCreate:a},null,8,["date"])])]),o.value?(i(),$(ne,{key:0,onClose:u},{default:R(()=>[D(ue,{onSuccess:m,onCancel:u})]),_:1})):f("",!0)]))}});export{xe as default};
